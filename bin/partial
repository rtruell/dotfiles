#!/usr/bin/env bash

StartDir=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )
cd "${StartDir}"

# when it all went to hell and you want a familiar environment in which to fix
# things, clone the 'dotfiles' repository and then run this.  it loads some
# functions and makes them available outside this script, symlinks the dotfiles,
# gives 'sudo' permissions to 'rtruell' and installs 'liquidprompt' to give a
# nice prompt.

source ./dotfiles/.functions/answer_is_y.function
source ./dotfiles/.functions/apt_package_installer.function
source ./dotfiles/.functions/execute_command.function
source ./dotfiles/.functions/01#findcommand.function
source ./dotfiles/.functions/print_error.function
source ./dotfiles/.functions/print_result.function
source ./dotfiles/.functions/print_success.function
source ./dotfiles/.functions/print_warn.function
source ./dotfiles/.functions/symlink_array_files.function
source ./dotfiles/.functions/symlink_single_file.function
source ./dotfiles/.functions/trim.function

export -f findcommand
export -f answer_is_y
export -f apt_package_installer
export -f execute_command
export -f print_error
export -f print_result
export -f print_success
export -f print_warn
export -f symlink_array_files
export -f symlink_single_file
export -f trim

cd dotfiles
computername=$(hostname -s)
source ./symlink.sh
source ./sudo.sh
apt_package_installer "liquidprompt"

printf '%s\n' "All done.  Now, exit the shell and then re-open it."
